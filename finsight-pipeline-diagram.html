<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FinSight Pipeline</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0a0a0a; color: #e0e0e0; font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; padding: 30px; min-height: 100vh; }
  
  h1 { text-align: center; font-size: 28px; font-weight: 700; margin-bottom: 6px; color: #fff; letter-spacing: -0.5px; }
  .subtitle { text-align: center; font-size: 13px; color: #666; margin-bottom: 40px; }
  
  .pipeline { display: flex; flex-direction: column; align-items: center; max-width: 1100px; margin: 0 auto; gap: 0; }
  
  /* Stage blocks */
  .stage { width: 100%; border-radius: 16px; padding: 24px 28px; position: relative; }
  .stage-header { display: flex; align-items: center; gap: 12px; margin-bottom: 14px; }
  .stage-num { background: #fff; color: #0a0a0a; font-weight: 800; font-size: 13px; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .stage-title { font-size: 16px; font-weight: 700; color: #fff; }
  .stage-badge { font-size: 10px; padding: 3px 8px; border-radius: 20px; font-weight: 600; margin-left: auto; }
  
  .stage-content { display: flex; gap: 12px; flex-wrap: wrap; margin-left: 40px; }
  .chip { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 8px 14px; font-size: 12px; line-height: 1.5; }
  .chip-title { font-weight: 700; color: #fff; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 3px; }
  .chip-detail { color: #999; font-size: 11px; }
  .chip-model { color: #7dd3fc; font-size: 11px; font-family: 'SF Mono', 'Consolas', monospace; }
  
  .output-box { margin-left: 40px; margin-top: 12px; background: rgba(255,255,255,0.03); border: 1px dashed rgba(255,255,255,0.15); border-radius: 8px; padding: 10px 16px; }
  .output-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
  .output-text { font-size: 12px; color: #999; }
  
  /* Arrow connector */
  .arrow { display: flex; justify-content: center; padding: 4px 0; }
  .arrow svg { opacity: 0.4; }
  
  /* Color themes per stage */
  .s1 { background: linear-gradient(135deg, rgba(99,102,241,0.12), rgba(99,102,241,0.04)); border: 1px solid rgba(99,102,241,0.2); }
  .s1 .stage-num { background: #6366f1; color: #fff; }
  .s1 .output-label { color: #6366f1; }
  .s1 .stage-badge { background: rgba(99,102,241,0.2); color: #a5b4fc; }
  
  .s2 { background: linear-gradient(135deg, rgba(16,185,129,0.12), rgba(16,185,129,0.04)); border: 1px solid rgba(16,185,129,0.2); }
  .s2 .stage-num { background: #10b981; color: #fff; }
  .s2 .output-label { color: #10b981; }
  .s2 .stage-badge { background: rgba(16,185,129,0.2); color: #6ee7b7; }
  
  .s3 { background: linear-gradient(135deg, rgba(245,158,11,0.12), rgba(245,158,11,0.04)); border: 1px solid rgba(245,158,11,0.2); }
  .s3 .stage-num { background: #f59e0b; color: #fff; }
  .s3 .output-label { color: #f59e0b; }
  .s3 .stage-badge { background: rgba(245,158,11,0.2); color: #fcd34d; }
  
  .s4 { background: linear-gradient(135deg, rgba(239,68,68,0.12), rgba(239,68,68,0.04)); border: 1px solid rgba(239,68,68,0.2); }
  .s4 .stage-num { background: #ef4444; color: #fff; }
  .s4 .output-label { color: #ef4444; }
  .s4 .stage-badge { background: rgba(239,68,68,0.2); color: #fca5a5; }
  
  .s5 { background: linear-gradient(135deg, rgba(168,85,247,0.12), rgba(168,85,247,0.04)); border: 1px solid rgba(168,85,247,0.2); }
  .s5 .stage-num { background: #a855f7; color: #fff; }
  .s5 .output-label { color: #a855f7; }
  .s5 .stage-badge { background: rgba(168,85,247,0.2); color: #d8b4fe; }
  
  /* Hardware legend */
  .legend { display: flex; gap: 20px; justify-content: center; margin-top: 36px; flex-wrap: wrap; }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 11px; color: #666; }
  .legend-dot { width: 10px; height: 10px; border-radius: 50%; }
  .dot-alpha { background: #f59e0b; }
  .dot-bravo { background: #10b981; }
  .dot-cpu { background: #6366f1; }
  .dot-cloud { background: #a855f7; }

  /* Backboard callout */
  .bb-strip { margin-top: 30px; background: linear-gradient(90deg, rgba(168,85,247,0.1), rgba(99,102,241,0.1)); border: 1px solid rgba(168,85,247,0.25); border-radius: 12px; padding: 18px 24px; max-width: 1100px; margin-left: auto; margin-right: auto; }
  .bb-title { font-size: 14px; font-weight: 700; color: #a855f7; margin-bottom: 8px; }
  .bb-items { display: flex; gap: 16px; flex-wrap: wrap; }
  .bb-item { font-size: 12px; color: #999; }
  .bb-item strong { color: #d8b4fe; }
</style>
</head>
<body>

<h1>FinSight Pipeline</h1>
<p class="subtitle">Raw Bank Calls → Clean, Structured, ML-Trainable, Audit-Ready Data</p>

<div class="pipeline">

  <!-- STAGE 1 -->
  <div class="stage s1">
    <div class="stage-header">
      <div class="stage-num">1</div>
      <div class="stage-title">Raw Audio Intake</div>
      <div class="stage-badge">CPU</div>
    </div>
    <div class="stage-content">
      <div class="chip">
        <div class="chip-title">Format Conversion</div>
        <div class="chip-model">FFmpeg</div>
        <div class="chip-detail">Any format → 16kHz mono WAV</div>
      </div>
      <div class="chip">
        <div class="chip-title">Accepts</div>
        <div class="chip-detail">mp3 / wav / mp4 / webm / ogg / m4a / flac</div>
      </div>
    </div>
    <div class="output-box">
      <div class="output-label">Output →</div>
      <div class="output-text">Normalized 16kHz mono WAV file</div>
    </div>
  </div>

  <div class="arrow"><svg width="24" height="28" viewBox="0 0 24 28"><path d="M12 0v22M5 16l7 7 7-7" stroke="#fff" stroke-width="2" fill="none"/></svg></div>

  <!-- STAGE 2 -->
  <div class="stage s2">
    <div class="stage-header">
      <div class="stage-num">2</div>
      <div class="stage-title">Clean & Analyze Audio</div>
      <div class="stage-badge">Alpha GPU + Bravo GPU + CPU</div>
    </div>
    <div class="stage-content">
      <div class="chip">
        <div class="chip-title">Noise & Quality</div>
        <div class="chip-model">Silero VAD + openSMILE</div>
        <div class="chip-detail">SNR scoring, quality 0-100, trim dead air/hold music</div>
      </div>
      <div class="chip">
        <div class="chip-title">Language Detection</div>
        <div class="chip-model">Whisper base</div>
        <div class="chip-detail">Auto-detect language + confidence</div>
      </div>
      <div class="chip">
        <div class="chip-title">Speaker Diarization</div>
        <div class="chip-model">pyannote 3.1</div>
        <div class="chip-detail">Who spoke when → Agent vs Customer</div>
      </div>
      <div class="chip">
        <div class="chip-title">Fraud Voice Detection</div>
        <div class="chip-model">emotion2vec + openSMILE + Parselmouth</div>
        <div class="chip-detail">Stress, jitter, shimmer, pitch anomalies</div>
      </div>
    </div>
    <div class="output-box">
      <div class="output-label">Output →</div>
      <div class="output-text">Clean audio stream (trimmed) + audio_metadata.json (quality score, speakers, language, fraud flags)</div>
    </div>
  </div>

  <div class="arrow"><svg width="24" height="28" viewBox="0 0 24 28"><path d="M12 0v22M5 16l7 7 7-7" stroke="#fff" stroke-width="2" fill="none"/></svg></div>

  <!-- STAGE 3 -->
  <div class="stage s3">
    <div class="stage-header">
      <div class="stage-num">3</div>
      <div class="stage-title">Financial Transcription</div>
      <div class="stage-badge">Alpha GPU</div>
    </div>
    <div class="stage-content">
      <div class="chip">
        <div class="chip-title">Speech → Text</div>
        <div class="chip-model">WhisperX (faster-whisper large-v3-turbo)</div>
        <div class="chip-detail">Word-level timestamps + per-word confidence + speaker IDs</div>
      </div>
      <div class="chip">
        <div class="chip-title">Financial Term Fix</div>
        <div class="chip-model">Data-driven correction dictionary</div>
        <div class="chip-detail">"Emmy"→EMI, "kayak"→KYC, ₹ normalization</div>
      </div>
      <div class="chip">
        <div class="chip-title">Quality Gate</div>
        <div class="chip-model">Confidence threshold &lt;0.7</div>
        <div class="chip-detail">Low-confidence segments flagged for human review</div>
      </div>
    </div>
    <div class="output-box">
      <div class="output-label">Output →</div>
      <div class="output-text">Time-aligned transcript with per-word confidence, speaker labels, and financial terms corrected</div>
    </div>
  </div>

  <div class="arrow"><svg width="24" height="28" viewBox="0 0 24 28"><path d="M12 0v22M5 16l7 7 7-7" stroke="#fff" stroke-width="2" fill="none"/></svg></div>

  <!-- STAGE 4 -->
  <div class="stage s4">
    <div class="stage-header">
      <div class="stage-num">4</div>
      <div class="stage-title">Understand Financial Meaning</div>
      <div class="stage-badge">Alpha GPU + Bravo GPU + Cloud</div>
    </div>
    <div class="stage-content">
      <div class="chip">
        <div class="chip-title">A — Intent Classification</div>
        <div class="chip-model">FinBERT (CPU filter) → Qwen3 8B + Instructor</div>
        <div class="chip-detail">agreement / refusal / promise / complaint / escalation</div>
      </div>
      <div class="chip">
        <div class="chip-title">B — Entity Extraction</div>
        <div class="chip-model">spaCy regex + Qwen3 8B + Instructor</div>
        <div class="chip-detail">EMI, dates, amounts, account numbers, names</div>
      </div>
      <div class="chip">
        <div class="chip-title">C — Obligation Detection</div>
        <div class="chip-model">Qwen3 8B + Instructor → Pydantic</div>
        <div class="chip-detail">Verbal commitments: binding / conditional / vague / denial</div>
      </div>
      <div class="chip">
        <div class="chip-title">D — Compliance Check</div>
        <div class="chip-model">Keyword rules (CPU) + Backboard → GPT-4o</div>
        <div class="chip-detail">Required disclosures, prohibited phrases, RBI/SEBI rules</div>
      </div>
      <div class="chip">
        <div class="chip-title">E — Sentiment & Emotion</div>
        <div class="chip-model">FinBERT (CPU) + emotion2vec (Bravo GPU)</div>
        <div class="chip-detail">Per-speaker trajectory, frustration escalation, agent tone</div>
      </div>
      <div class="chip">
        <div class="chip-title">F — Fraud Signals</div>
        <div class="chip-model">openSMILE + Qwen3 8B</div>
        <div class="chip-detail">Voice stress + inconsistency + coached speech + 3rd party</div>
      </div>
    </div>
    <div class="output-box">
      <div class="output-label">Output →</div>
      <div class="output-text">Complete structured CallRecord: intents, entities, obligations, compliance checks, emotions, fraud signals</div>
    </div>
  </div>

  <div class="arrow"><svg width="24" height="28" viewBox="0 0 24 28"><path d="M12 0v22M5 16l7 7 7-7" stroke="#fff" stroke-width="2" fill="none"/></svg></div>

  <!-- STAGE 5 -->
  <div class="stage s5">
    <div class="stage-header">
      <div class="stage-num">5</div>
      <div class="stage-title">Produce Reviewable, Auditable Output</div>
      <div class="stage-badge">CPU + Backboard Cloud</div>
    </div>
    <div class="stage-content">
      <div class="chip">
        <div class="chip-title">ML-Trainable Export</div>
        <div class="chip-model">Pandas → Parquet / CSV / JSONL</div>
        <div class="chip-detail">Flat records for model training, every field traceable to timestamp</div>
      </div>
      <div class="chip">
        <div class="chip-title">Compliance Audit Report</div>
        <div class="chip-model">Scorecard generator</div>
        <div class="chip-detail">Pass/fail per rule, risk level, flagged segments with audio links</div>
      </div>
      <div class="chip">
        <div class="chip-title">Knowledge Base</div>
        <div class="chip-model">Backboard.io persistent threads + RAG</div>
        <div class="chip-detail">Cross-call search: "all calls where consent was disputed"</div>
      </div>
      <div class="chip">
        <div class="chip-title">Human Review Queue</div>
        <div class="chip-model">Priority-scored queue</div>
        <div class="chip-detail">Auto-flagged calls → approve / reject / escalate</div>
      </div>
    </div>
    <div class="output-box">
      <div class="output-label">Final Output →</div>
      <div class="output-text">Structured JSON + Parquet dataset + Audit report + Searchable knowledge base + Review queue</div>
    </div>
  </div>

</div>

<!-- Hardware Legend -->
<div class="legend">
  <div class="legend-item"><div class="legend-dot dot-alpha"></div>Alpha — RTX 3060 12GB (WhisperX, Qwen3 8B, LightRAG)</div>
  <div class="legend-item"><div class="legend-dot dot-bravo"></div>Bravo — RTX 4050 8GB (emotion2vec, Phi-4 Mini)</div>
  <div class="legend-item"><div class="legend-dot dot-cpu"></div>CPU — Any machine (FinBERT, openSMILE, spaCy, textstat)</div>
  <div class="legend-item"><div class="legend-dot dot-cloud"></div>Backboard.io — Cloud (GPT-4o routing, memory, RAG, audit trails)</div>
</div>

<!-- Backboard Strip -->
<div class="bb-strip">
  <div class="bb-title">⚡ Backboard.io — Woven Through Every Stage</div>
  <div class="bb-items">
    <div class="bb-item"><strong>LLM Routing:</strong> Complex compliance → GPT-4o</div>
    <div class="bb-item"><strong>Memory:</strong> Per-customer persistent threads</div>
    <div class="bb-item"><strong>RAG:</strong> Search across all transcripts + regulations</div>
    <div class="bb-item"><strong>Embeddings:</strong> Offload when local GPU busy</div>
    <div class="bb-item"><strong>Audit Trail:</strong> Immutable analysis logs per call</div>
  </div>
</div>

</body>
</html>
